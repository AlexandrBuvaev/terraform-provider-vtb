---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "vtb_rabbitmq_cluster Resource - terraform-provider-vtb"
subcategory: ""
description: |-
  
---

# vtb_rabbitmq_cluster (Resource)



## Example Usage

```terraform
data "vtb_core_data" "dev" {
  platform    = "OpenStack"
  domain      = "corp.dev.vtb"
  net_segment = "dev-srv-app"
  zone        = "msk-north"
}

data "vtb_flavor_data" "c4m16" {
  cores  = 4
  memory = 16
}

data "vtb_rabbitmq_image_data" "img" {
  distribution = "astra"
  os_version   = "1.7"
}

data "vtb_cluster_layout" "rabbitmq" {
  layout      = "one_dc:rabbitmq-2:quorum-1"
  net_segment = "dev-srv-app"
}

resource "vtb_rabbitmq_cluster" "name" {
  lifetime         = 2
  label            = "TerraformRabbit1"
  rabbitmq_version = "3.11.26"
  cluster_name = "test"
  financial_project = "VTB.Cloud"

  core      = data.vtb_core_data.dev
  flavor    = data.vtb_flavor_data.c4m16
  image     = data.vtb_rabbitmq_image_data.img
  layout_id = data.vtb_cluster_layout.rabbitmq.id
  extra_mounts = {
    "/app" = {
      size        = 50
    }
  }
  web_access = {
    admins = []
    managers = [
      "cloud-soub-rabbitmq",
    ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_name` (String) Клиентская часть имени кластера
- `core` (Attributes) Основные параметры для виртуальных машин в заказе (see [below for nested schema](#nestedatt--core))
- `extra_mounts` (Attributes Map) Дополнительные точки монтирования (see [below for nested schema](#nestedatt--extra_mounts))
- `financial_project` (String) Источник финансирования для заказа.
- `flavor` (Attributes) Количество ЦПУ и оперативной памяти, которые необходимы на вирутальных машинах (see [below for nested schema](#nestedatt--flavor))
- `image` (Attributes) Образ вычислительно экземпляра (see [below for nested schema](#nestedatt--image))
- `label` (String) Название заказа
- `layout_id` (String) Layout ID из справочника geo_distribution.
- `rabbitmq_version` (String) Версия RabbitMQ

### Optional

- `access` (Map of Set of String) Словарь,где ключом является роль, а занчением список групп, которые предоставляют доступ для входа в Active Directory
- `lifetime` (Number) Время жизни заказа в днях (2, 7, 14, 30)
- `update_product_mode` (String) Мод для регулировки политики обновлений("latest"/"none"),если флаг проставлен в "latest", 
								      то будет активировано действие "Обновить версию релиза продукта"
- `web_access` (Attributes) Управление пользователями по ролям(администраторы, менеджеры) для доступа к веб-интерфейсу кластера (see [below for nested schema](#nestedatt--web_access))

### Read-Only

- `build_version` (String) Версия релиза продукта
- `certificate_cn` (String) Название сертификата
- `certificate_expiration` (String) Дата начала действия сертификата
- `certificate_valid_from` (String) Дата окончания действия сертификата
- `item_id` (String) Идентификатор элемента виртуальной машины по заказе. Становиться известен после создания виртуальной машины
- `order_id` (String) Идентификатор заказа. Становится известен после создания заказа

<a id="nestedatt--core"></a>
### Nested Schema for `core`

Required:

- `domain` (String) Название сетевого сегмента для заказа. Пример: dev-srv-app
- `net_segment` (String) Network segment name of order
- `platform` (String) Название платформы заказа Пример: OpenStack
- `zone` (String) Зона доступности, где будет размещен заказ. Пример: msk-north


<a id="nestedatt--extra_mounts"></a>
### Nested Schema for `extra_mounts`

Required:

- `size` (Number) Размер точки монтирования (указвается в ГБ)

Read-Only:

- `file_system` (String) Название типа файловой системы


<a id="nestedatt--flavor"></a>
### Nested Schema for `flavor`

Required:

- `cores` (Number) Количество ядер ЦПУ.
- `memory` (Number) Количество оперативной памяти RAM (указывается в ГБ).
- `name` (String) Кодовое название конфигурации.
- `uuid` (String) Уникальный идентификатор на странице справочников.


<a id="nestedatt--image"></a>
### Nested Schema for `image`

Required:

- `ad_integration` (Boolean) Флаг для интеграции виртуальной машины в Active Directory
- `distribution` (String) Название дистрибутива (RHEL или Astra).
- `geo_distribution` (Boolean) Механизм для включения/выключения геораспределения.
- `on_support` (Boolean) Флаг регулирущий режим работы группы сопровождения.
- `os_version` (String) Версия образа дистрибутива.
- `product_id` (String) Идентификатор продукта.


<a id="nestedatt--web_access"></a>
### Nested Schema for `web_access`

Required:

- `managers` (Set of String)

Optional:

- `admins` (Set of String)

## Import

Import is supported using the following syntax:

```shell
tofu import vtb_rabbitmq_cluster.name <order_id>
```
