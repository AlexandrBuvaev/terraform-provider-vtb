---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "vtb_elasticsearch_cluster Resource - terraform-provider-vtb"
subcategory: ""
description: |-
  
---

# vtb_elasticsearch_cluster (Resource)



## Example Usage

```terraform
data "vtb_core_data" "dev" {
  platform    = "OpenStack"
  net_segment = "dev-srv-app"
  zone        = "msk-north"
  domain      = "corp.dev.vtb"
}

data "vtb_elasticsearch_image_data" "elastic_image" {
  os_version   = "1.8"
  distribution = "astra"
}

data "vtb_flavor_data" "master_flavor" {
  cores  = 4
  memory = 8
}

data "vtb_flavor_data" "data_flavor" {
  cores  = 4
  memory = 8
}

data "vtb_flavor_data" "coordinator_flavor" {
  cores  = 4
  memory = 8
}

// required if 'install_kibana' = true
data "vtb_flavor_data" "kibana_flavor" {
  cores  = 4
  memory = 8
}

resource "vtb_elasticsearch_cluster" "cluster_with_install_kibana" {
  label                 = "Elasticsearch Astra tf"
  financial_project     = "VTB.Cloud"
  core                  = data.vtb_core_data.dev
  image                 = data.vtb_elasticsearch_image_data.elastic_image
  flavor_master         = data.vtb_flavor_data.master_flavor
  flavor_data           = data.vtb_flavor_data.data_flavor
  flavor_coordinator    = data.vtb_flavor_data.coordinator_flavor
  elasticsearch_version = "2.15.0 + Exporter 1.1.0"
  cluster_name          = "test-cluster"
  fluentd_password      = "AonlELAyj8roIzT%NrKYd4gLW2mSc@tW5TEq7^Miw~q%2t#823^50sG5@E"
  kibana_password       = "hZBo3dYhU#pvhuuQsFN0LaTz!ycKjCzp%Q#9uLvLH"
  nodes_count = {
    data        = 2
    master      = 1
    coordinator = 0
  }
  adm_app_groups  = ["cloud-soub-developers"]
  user_app_groups = ["cloud-soub-developers"]
  data_extra_mounts = {
    "/app/" = {
      size = 100
    }
  }
  install_kibana = true

  // dev only
  system_adm_groups = ["cloud-soub-developers"]
  access = {
    "superuser" = [
      "cloud-soub-developers",
    ]
  }

  // required if 'install_kibana' = true
  kibana_extra_mounts = {
    "/app/kibana" = {
      size = 100
    }
  }
  kibana_location = "separate host"
  flavor_kibana   = data.vtb_flavor_data.kibana_flavor
}


resource "vtb_elasticsearch_cluster" "cluster_without_install_kibana" {
  label                 = "Elasticsearch Astra tf"
  financial_project     = "VTB.Cloud"
  core                  = data.vtb_core_data.dev
  image                 = data.vtb_elasticsearch_image_data.elastic_image
  flavor_master         = data.vtb_flavor_data.master_flavor
  flavor_data           = data.vtb_flavor_data.data_flavor
  flavor_coordinator    = data.vtb_flavor_data.coordinator_flavor
  elasticsearch_version = "2.15.0 + Exporter 1.1.0"
  cluster_name          = "test-cluster"
  fluentd_password      = "AonlELAyj8roIzT%NrKYd4gLW2mSc@tW5TEq7^Miw~q%2t#823^50sG5@E"
  kibana_password       = "hZBo3dYhU#pvhuuQsFN0LaTz!ycKjCzp%Q#9uLvLH"
  nodes_count = {
    data        = 2
    master      = 1
    coordinator = 0
  }
  data_extra_mounts = {
    "/app/" = {
      size = 100
    }
  }
  adm_app_groups  = ["cloud-soub-buvaev"]
  user_app_groups = ["cloud-soub-buvaev"]
  install_kibana  = false

  // dev only
  system_adm_groups = ["cloud-soub-buvaev"]
  access = {
    "superuser" = [
      "cloud-soub-developers",
    ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `adm_app_groups` (Set of String) Группы admin application
- `cluster_name` (String) Имя кластера
- `core` (Attributes) Основные параметры для виртуальных машин в заказе (see [below for nested schema](#nestedatt--core))
- `data_extra_mounts` (Attributes Map) Точки монтирования нод Data (see [below for nested schema](#nestedatt--data_extra_mounts))
- `elasticsearch_version` (String) Версия Elasticsearch Opensearch
- `financial_project` (String) Источник финансирования
- `flavor_coordinator` (Attributes) Конфигурация Core/RAM для ноды типа Coordinator (see [below for nested schema](#nestedatt--flavor_coordinator))
- `flavor_data` (Attributes) Конфигурация Core/RAM для ноды типа Data (see [below for nested schema](#nestedatt--flavor_data))
- `flavor_master` (Attributes) Конфигурация Core/RAM для ноды типа Master (see [below for nested schema](#nestedatt--flavor_master))
- `fluentd_password` (String, Sensitive) Пароль пользователя fluentd
- `image` (Attributes) Тип вычислительного ресурса (see [below for nested schema](#nestedatt--image))
- `install_kibana` (Boolean) Установить Kibana
- `kibana_password` (String, Sensitive) Пароль пользователя kibana
- `label` (String) Метка заказа
- `nodes_count` (Attributes) Кол-во нод кластера по типу (see [below for nested schema](#nestedatt--nodes_count))
- `user_app_groups` (Set of String) Группы user application

### Optional

- `access` (Map of Set of String) Словарь,где ключом является роль, а значением список групп, которые предоставляют доступ для входа в Active Directory
- `flavor_kibana` (Attributes) Конфигурация Core/RAM для ноды типа Kibana (see [below for nested schema](#nestedatt--flavor_kibana))
- `kibana_extra_mounts` (Attributes Map) Точки монтирования нод Kibana (see [below for nested schema](#nestedatt--kibana_extra_mounts))
- `kibana_location` (String) Место установки Kibana
- `lifetime` (Number) Время жизни заказа в днях (2, 7, 14, 30)
- `system_adm_groups` (Set of String) Группы system administrator

### Read-Only

- `coordinator_extra_mounts` (Attributes Map) Точки монтирования нод Coordinator (see [below for nested schema](#nestedatt--coordinator_extra_mounts))
- `item_id` (String) Идентфикатор сущностей ВМ, известен после создания ВМ
- `layout` (String) Схема геораспределения
- `master_extra_mounts` (Attributes Map) Точки монтирования нод Master (see [below for nested schema](#nestedatt--master_extra_mounts))
- `order_id` (String) Идентификатор заказа, известен после создания заказа

<a id="nestedatt--core"></a>
### Nested Schema for `core`

Required:

- `domain` (String) Название сетевого сегмента для заказа. Пример: dev-srv-app
- `net_segment` (String) Network segment name of order
- `platform` (String) Название платформы заказа Пример: OpenStack
- `zone` (String) Зона доступности, где будет размещен заказ. Пример: msk-north


<a id="nestedatt--data_extra_mounts"></a>
### Nested Schema for `data_extra_mounts`

Required:

- `size` (Number) Размер точки монтирования (размер в ГБ)

Read-Only:

- `file_system` (String) Тип файловой системы


<a id="nestedatt--flavor_coordinator"></a>
### Nested Schema for `flavor_coordinator`

Required:

- `cores` (Number) Количество ядер ЦПУ.
- `memory` (Number) Количество оперативной памяти RAM (указывается в ГБ).
- `name` (String) Кодовое название конфигурации.
- `uuid` (String) Уникальный идентификатор на странице справочников.


<a id="nestedatt--flavor_data"></a>
### Nested Schema for `flavor_data`

Required:

- `cores` (Number) Количество ядер ЦПУ.
- `memory` (Number) Количество оперативной памяти RAM (указывается в ГБ).
- `name` (String) Кодовое название конфигурации.
- `uuid` (String) Уникальный идентификатор на странице справочников.


<a id="nestedatt--flavor_master"></a>
### Nested Schema for `flavor_master`

Required:

- `cores` (Number) Количество ядер ЦПУ.
- `memory` (Number) Количество оперативной памяти RAM (указывается в ГБ).
- `name` (String) Кодовое название конфигурации.
- `uuid` (String) Уникальный идентификатор на странице справочников.


<a id="nestedatt--image"></a>
### Nested Schema for `image`

Required:

- `ad_integration` (Boolean) Флаг для интеграции виртуальной машины в Active Directory
- `distribution` (String) Название дистрибутива (RHEL или Astra).
- `geo_distribution` (Boolean) Механизм для включения/выключения геораспределения.
- `on_support` (Boolean) Флаг регулирущий режим работы группы сопровождения.
- `os_version` (String) Версия образа дистрибутива.
- `product_id` (String) Идентификатор продукта.


<a id="nestedatt--nodes_count"></a>
### Nested Schema for `nodes_count`

Required:

- `coordinator` (Number) Кол-во нод типа Coordinator
- `data` (Number) Кол-во нод типа Data
- `master` (Number) Кол-во нод типа Master


<a id="nestedatt--flavor_kibana"></a>
### Nested Schema for `flavor_kibana`

Required:

- `cores` (Number) Количество ядер ЦПУ.
- `memory` (Number) Количество оперативной памяти RAM (указывается в ГБ).
- `name` (String) Кодовое название конфигурации.
- `uuid` (String) Уникальный идентификатор на странице справочников.


<a id="nestedatt--kibana_extra_mounts"></a>
### Nested Schema for `kibana_extra_mounts`

Required:

- `size` (Number) Размер точки монтирования (размер в ГБ)

Read-Only:

- `file_system` (String) Тип файловой системы


<a id="nestedatt--coordinator_extra_mounts"></a>
### Nested Schema for `coordinator_extra_mounts`

Required:

- `size` (Number) Размер точки монтирования (размер в ГБ)

Read-Only:

- `file_system` (String) Тип файловой системы


<a id="nestedatt--master_extra_mounts"></a>
### Nested Schema for `master_extra_mounts`

Required:

- `size` (Number) Размер точки монтирования (размер в ГБ)

Read-Only:

- `file_system` (String) Тип файловой системы

## Import

Import is supported using the following syntax:

```shell
tofu import vtb_elasticsearch_cluster.test <order_id>
```
